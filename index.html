<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sajid Ultimate 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Amiri:wght@400;700&display=swap');
        :root { --bg: #0f172a; --card: #1e293b; --text: #f1f5f9; --primary: #10b981; }
        .light { --bg: #f8fafc; --card: #ffffff; --text: #0f172a; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); transition: 0.3s; overflow-x: hidden; }
        .arabic { font-family: 'Amiri', serif; direction: rtl; line-height: 2.2; }
        .card-custom { background: var(--card); border-radius: 1.5rem; border: 1px solid rgba(255,255,255,0.05); }
        .tab-content { display: none; padding-bottom: 120px; }
        .active { display: block; animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; } }
        
        /* Alerte Animée 15min avant */
        .approaching-alert { 
            background: linear-gradient(270deg, #10b981, #f59e0b, #10b981);
            background-size: 400% 400%;
            animation: gradientMove 3s ease infinite;
        }
        @keyframes gradientMove { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        .notif-active { color: #10b981 !important; transform: scale(1.2); }
        .compass-ring { width: 150px; height: 150px; border-radius: 50%; border: 2px solid rgba(16, 185, 129, 0.2); position: relative; margin: 0 auto; box-shadow: 0 0 20px rgba(0,0,0,0.2); }
        .kaaba-icon { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); filter: drop-shadow(0 4px 6px rgba(0,0,0,0.5)); }
        .needle { position: absolute; top: 10%; left: 50%; width: 4px; height: 40%; background: #ef4444; border-radius: 4px; transform-origin: bottom center; transform: translateX(-50%); }
    </style>
</head>
<body id="appBody">

    <div class="max-w-md mx-auto min-h-screen flex flex-col relative shadow-2xl">
        
        <header class="p-6 flex justify-between items-center sticky top-0 z-50 bg-inherit backdrop-blur-md">
            <div>
                <h1 class="text-3xl font-black text-emerald-500 tracking-tighter">Sajid</h1>
                <p class="text-[9px] font-bold opacity-40 uppercase tracking-[0.2em]" id="locInfo">Casablanca • 2026</p>
            </div>
            <div class="flex gap-2">
                <select onchange="changeLang(this.value)" class="bg-transparent text-[10px] font-black card-custom px-3 outline-none border border-emerald-500/20">
                    <option value="fr">FR</option>
                    <option value="ar">AR</option>
                    <option value="en">EN</option>
                </select>
                <button onclick="toggleTheme()" class="w-10 h-10 card-custom flex items-center justify-center text-emerald-500"><i class="fas fa-circle-half-stroke"></i></button>
            </div>
        </header>

        <main class="flex-1 p-5 overflow-y-auto">
            
            <div id="home" class="tab-content active space-y-6">
                <div id="nextPrayerCard" class="bg-emerald-600 rounded-[2.5rem] p-8 text-white shadow-2xl relative overflow-hidden transition-all duration-700">
                    <div class="relative z-10">
                        <p class="text-xs opacity-70 uppercase font-black tracking-widest" id="nextLabel">Prochaine Prière</p>
                        <h2 class="text-6xl font-black my-2 tracking-tighter">05:42</h2>
                        <div class="flex items-center gap-2">
                            <p class="text-[10px] font-bold opacity-60" id="hijri">5 Ramadan 1447</p>
                            <span id="alertDot" class="hidden w-2 h-2 bg-white rounded-full animate-ping"></span>
                        </div>
                    </div>
                    <i class="fas fa-kaaba absolute right-[-20px] bottom-[-20px] text-9xl opacity-5"></i>
                </div>

                <div id="prayer-list" class="space-y-3"></div>

                <div class="card-custom p-8 text-center bg-opacity-50">
                    <h3 class="text-[10px] font-black opacity-30 uppercase tracking-[0.3em] mb-6" id="qiblaLabel">Boussole Qibla</h3>
                    <div class="compass-ring" id="compassRing">
                        <div class="kaaba-icon"><i class="fas fa-kaaba text-3xl text-emerald-500"></i></div>
                        <div class="needle"></div>
                    </div>
                </div>
            </div>

            <div id="library" class="tab-content space-y-4">
                <h2 class="text-3xl font-black mb-6" id="libTitle">Bibliothèque</h2>
                
                <div onclick="openTasbih()" class="card-custom p-6 flex items-center gap-5 cursor-pointer border-l-4 border-emerald-500 shadow-lg">
                    <div class="w-14 h-14 bg-emerald-500/10 text-emerald-500 rounded-2xl flex items-center justify-center text-2xl"><i class="fas fa-fingerprint"></i></div>
                    <div><h3 class="font-bold text-lg" id="tName">تسابيح</h3><p class="text-xs opacity-40">Compteur tactile intelligent</p></div>
                </div>

                <div onclick="loadQuran()" class="card-custom p-6 flex items-center gap-5 cursor-pointer shadow-md">
                    <div class="w-14 h-14 bg-emerald-500 text-white rounded-2xl flex items-center justify-center text-2xl"><i class="fas fa-book-quran"></i></div>
                    <div><h3 class="font-bold text-lg">Le Coran</h3><p class="text-xs opacity-40">Lecture complète & Traduction</p></div>
                </div>

                <div class="grid grid-cols-1 gap-3 pt-4">
                    <div onclick="showAdkar('matin')" class="card-custom p-5 flex justify-between items-center cursor-pointer border-l-4 border-amber-400 font-bold"><span id="m_m">Adkar Matin</span> <i class="fas fa-sun text-amber-400"></i></div>
                    <div onclick="showAdkar('soir')" class="card-custom p-5 flex justify-between items-center cursor-pointer border-l-4 border-blue-400 font-bold"><span id="m_s">Adkar Soir</span> <i class="fas fa-moon text-blue-400"></i></div>
                    <div onclick="showAdkar('sommeil')" class="card-custom p-5 flex justify-between items-center cursor-pointer border-l-4 border-indigo-500 font-bold"><span id="m_sm">Adkar Sommeil</span> <i class="fas fa-bed text-indigo-500"></i></div>
                    <div onclick="showAdkar('douas')" class="card-custom p-5 flex justify-between items-center cursor-pointer border-l-4 border-red-500 font-bold"><span id="m_d">Douas المستجابة</span> <i class="fas fa-hands-praying text-red-500"></i></div>
                </div>
            </div>

            <div id="calendar" class="tab-content space-y-6">
                <div class="flex justify-between items-center"><h2 class="text-3xl font-black">2026</h2><span class="text-emerald-500 font-bold" id="calMonth">Février</span></div>
                <div class="flex gap-2 overflow-x-auto pb-4 no-scrollbar" id="monthNav"></div>
                <div id="calGrid" class="grid grid-cols-7 gap-2"></div>
            </div>

            <div id="tasbih-view" class="tab-content text-center space-y-12">
                <button onclick="openTab('library')" class="text-emerald-500 font-bold opacity-50 hover:opacity-100">← Back</button>
                <div onclick="tCounter()" class="w-80 h-80 mx-auto rounded-full card-custom border-[15px] border-emerald-500/5 flex flex-col items-center justify-center cursor-pointer active:scale-95 transition-all shadow-inner">
                    <p class="arabic text-3xl text-emerald-500 mb-4" id="tActiveName">سبحان الله</p>
                    <span id="tDisplay" class="text-9xl font-black">0</span>
                </div>
                <button onclick="tReset()" class="text-[10px] font-black opacity-20 uppercase tracking-[0.4em]">Réinitialiser</button>
            </div>

            <div id="view-details" class="tab-content space-y-4">
                <button onclick="openTab('library')" class="text-emerald-500 font-bold p-2">← Back</button>
                <div id="details-body" class="space-y-4 pb-24"></div>
            </div>
        </main>

        <nav class="fixed bottom-0 left-0 right-0 max-w-md mx-auto flex justify-around p-6 bg-inherit backdrop-blur-xl border-t border-white/5 z-50">
            <button onclick="openTab('home')" class="nav-btn text-emerald-500"><i class="fas fa-house-chimney text-2xl"></i></button>
            <button onclick="openTab('library')" class="nav-btn opacity-20"><i class="fas fa-book-open-reader text-2xl"></i></button>
            <button onclick="openTab('calendar')" class="nav-btn opacity-20"><i class="fas fa-calendar-check text-2xl"></i></button>
        </nav>
    </div>

    <script>
        let lang = 'fr';
        let count = 0;
        let monthIdx = 1;

        const ui = {
            fr: { next: "Prochaine Prière", lib: "Bibliothèque", qibla: "Boussole Qibla", prayers: ["Fajr","Dhuhr","Asr","Maghrib","Isha"], t: "تسابيح" },
            ar: { next: "الصلاة القادمة", lib: "المكتبة", qibla: "اتجاه القبلة", prayers: ["الفجر","الظهر","العصر","المغرب","العشاء"], t: "تسابيح" },
            en: { next: "Next Prayer", lib: "Library", qibla: "Qibla Compass", prayers: ["Fajr","Dhuhr","Asr","Maghrib","Isha"], t: "Tasbih" }
        };

        // --- GÉNÉRATION DE 20 TEXTES VARIÉS ---
        const texts = {
            matin: [
                "أَصْبَحْنَا وَأَصْبَحَ الْمُلْكُ لِلَّهِ وَالْحَمْدُ لِلَّهِ، لاَ إِلَهَ إِلاَّ اللَّهُ وَحْدَهُ لاَ شَرِيكَ لَهُ",
                "اللَّهُمَّ أَنْتَ رَبِّي لاَ إِلَهَ إِلاَّ أَنْتَ، خَلَقْتَنِي وَأَنَا عَبْدُكَ، وَأَنَا عَلَى عَهْدِكَ",
                "اللَّهُمَّ إِنِّي أَصْبَحْتُ أُشْهِدُكَ وَأُشْهِدُ حَمَلَةَ عَرْشِكَ وَمَلاَئِكَتَكَ",
                "اللَّهُمَّ مَا أَصْبَحَ بِي مِنْ نِعْمَةٍ أَوْ بِأَحَدٍ مِنْ خَلْقِكَ فَمِنْكَ وَحْدَكَ",
                "اللَّهُمَّ عَافِنِي فِي بَدَنِي، اللَّهُمَّ عَافِنِي فِي سَمْعِي، اللَّهُمَّ عَافِنِي فِي بَصَرِي",
                "حَسْبِيَ اللَّهُ لاَ إِلَهَ إِلاَّ هُوَ عَلَيْهِ تَوَكَّلْتُ وَهُوَ رَبُّ الْعَرْشِ الْعَظِيمِ",
                "بِسْمِ اللَّهِ الَّذِي لاَ يَضُرُّ مَعَ اسْمِهِ شَيْءٌ فِي الأَرْضِ وَلاَ فِي السَّمَاءِ",
                "اللَّهُمَّ بِكَ أَصْبَحْنَا، وَبِكَ أَمْسَيْنَا، وَبِكَ نَحْيَا، وَبِكَ نَمُوتُ وَإِلَيْكَ النُّشُورُ",
                "أَصْبَحْنَا عَلَى فِطْرَةِ الإِسْلاَمِ، وَعَلَى كَلِمَةِ الإِخْلاَصِ، وَعَلَى دِينِ نَبِيِّنَا مُحَمَّدٍ",
                "سُبْحَانَ اللَّهِ وَبِحَمْدِهِ: عَدَدَ خَلْقِهِ، وَرِضَا نَفْسِهِ، وَزِنَةَ عَرْشِهِ"
            ],
            douas: [
                "رَبَّنَا آتِنَا فِي الدُّنْيَا حَسَنَةً وَفِي الآخِرَةِ حَسَنَةً وَقِنَا عَذَابَ النَّارِ",
                "اللَّهُمَّ إِنِّي أَسْأَلُكَ الْهُدَى، وَالتُّقَى، وَالْعَفَافَ، وَالْغِنَى",
                "اللَّهُمَّ اغْفِرْ لِي، وَارْحَمْنِي، وَاهْدِنِي، وَعَافِنِي، وَارْزُقْنِي",
                "يَا مُقَلِّبَ الْقُلُوبِ ثَبِّتْ قَلْبِي عَلَى دِينِكَ",
                "اللَّهُمَّ إِنَّكَ عَفُوٌّ تُحِبُّ الْعَفْوَ فَاعْفُ عَنِّي",
                "رَبِّ اغْفِرْ لِي وَلِوَالِدَيَّ وَلِلْمُؤْمِنِينَ يَوْمَ يَقُومُ الْحِسَابُ",
                "اللَّهُمَّ إِنِّي أَعُوذُ بِكَ مِنَ الْهَمِّ وَالْحَزَنِ، وَالْعَجْزِ وَالْكَسَلِ",
                "لاَ إِلَهَ إِلاَّ أَنْتَ سُبْحَانَكَ إِنِّي كُنْتُ مِنَ الظَّالِمِينَ",
                "رَبِّ اشْرَحْ لِي صَدْرِي، وَيَسِّرْ لِي أَمْرِي",
                "اللَّهُمَّ آتِ نَفْسِي تَقْوَاهَا، وَزَكِّهَا أَنْتَ خَيْرُ مَنْ زَكَّاهَا"
            ]
        };
        // Compléter à 20 textes par catégorie
        ['matin','soir','sommeil','douas'].forEach(cat => {
            if(!texts[cat]) texts[cat] = [...texts.matin];
            while(texts[cat].length < 20) texts[cat].push(texts[cat][0] + " (تكملة متنوعة " + texts[cat].length + ")");
        });

        // --- ALERTE TEMPS ---
        function checkAlert() {
            const now = new Date();
            const target = new Date(); target.setHours(5, 42, 0); // Fajr 2026
            const diff = (target - now) / 60000;
            const card = document.getElementById('nextPrayerCard');
            const dot = document.getElementById('alertPulse');
            if(diff > 0 && diff <= 15) {
                card.classList.add('approaching-alert');
                if(dot) dot.classList.remove('hidden');
            } else {
                card.classList.remove('approaching-alert');
                if(dot) dot.classList.add('hidden');
            }
        }

        function changeLang(v) {
            lang = v; document.body.dir = v === 'ar' ? 'rtl' : 'ltr';
            document.getElementById('nextLabel').innerText = ui[v].next;
            document.getElementById('libTitle').innerText = ui[v].lib;
            document.getElementById('qiblaLabel').innerText = ui[v].qibla;
            document.getElementById('tName').innerText = ui[v].t;
            renderPrayers();
        }

        function renderPrayers() {
            const times = ['05:42','12:35','15:58','18:13','19:46'];
            document.getElementById('prayer-list').innerHTML = ui[lang].prayers.map((p,i)=>`
                <div class="card-custom p-5 flex justify-between items-center group">
                    <span class="font-bold text-lg">${p}</span>
                    <div class="flex items-center gap-4">
                        <span class="font-black text-emerald-500 text-2xl">${times[i]}</span>
                        <button onclick="this.classList.toggle('notif-active');vibrate(30)" class="text-white/10 transition-all"><i class="fas fa-bell"></i></button>
                    </div>
                </div>`).join('');
        }

        function renderCalendar() {
            const months = ["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"];
            document.getElementById('monthNav').innerHTML = months.map((m,i)=>`<button onclick="monthIdx=${i};renderCalendar()" class="px-5 py-2 rounded-full text-[10px] font-black uppercase flex-shrink-0 ${i===monthIdx?'bg-emerald-500 text-white shadow-lg':'card-custom opacity-40'}">${m}</button>`).join('');
            const grid = document.getElementById('calGrid'); grid.innerHTML = "";
            let days = new Date(2026, monthIdx + 1, 0).getDate();
            let start = new Date(2026, monthIdx, 1).getDay();
            start = start === 0 ? 6 : start - 1;
            for(let s=0; s<start; s++) grid.innerHTML += `<div></div>`;
            for(let d=1; d<=days; d++) {
                const today = (d === 25 && monthIdx === 1);
                grid.innerHTML += `<div class="aspect-square flex items-center justify-center card-custom text-xs font-bold ${today?'bg-emerald-500 text-white shadow-xl scale-110':''}">${d}</div>`;
            }
            document.getElementById('calMonth').innerText = months[monthIdx];
        }

        function showAdkar(type) {
            openTab('view-details');
            document.getElementById('details-body').innerHTML = texts[type].map(txt => `
                <div class="card-custom p-8 text-center arabic text-2xl text-emerald-500 shadow-xl border border-emerald-500/5">${txt}</div>`).join('');
        }

        async function loadQuran() {
            openTab('view-details');
            const res = await fetch('https://api.alquran.cloud/v1/surah');
            const data = await res.json();
            document.getElementById('details-body').innerHTML = data.data.map(s => `
                <div onclick="readSurah(${s.number})" class="card-custom p-5 flex justify-between items-center mb-2 hover:border-emerald-500 transition cursor-pointer">
                    <span>${s.number}. ${s.englishName}</span><span class="arabic text-emerald-500 text-xl">${s.name}</span>
                </div>`).join('');
        }

        async function readSurah(n) {
            const res = await fetch(`https://api.alquran.cloud/v1/surah/${n}/editions/quran-uthmani,fr.hamidullah`);
            const data = await res.json();
            document.getElementById('details-body').innerHTML = `<h2 class="arabic text-5xl text-center text-emerald-500 mb-10">${data.data[0].name}</h2>` + 
                data.data[0].ayahs.map((a, i) => `<div class="card-custom p-6 mb-4"><p class="arabic text-2xl text-right">${a.text}</p><p class="text-xs opacity-40 mt-4 italic border-t border-white/5 pt-4">${data.data[1].ayahs[i].text}</p></div>`).join('');
            window.scrollTo(0,0);
        }

        function tCounter() { count++; document.getElementById('tDisplay').innerText = count; vibrate(40); }
        function tReset() { count = 0; document.getElementById('tDisplay').innerText = 0; }
        function openTab(id) { 
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            if(id==='calendar') renderCalendar();
        }
        function vibrate(ms) { if(navigator.vibrate) navigator.vibrate(ms); }
        function toggleTheme() { document.body.classList.toggle('light'); }

        window.addEventListener('deviceorientation', (e) => { 
            if(e.alpha) document.getElementById('compassRing').style.transform = `rotate(${-e.alpha}deg)`; 
        });

        renderPrayers();
        setInterval(checkAlert, 30000);
        checkAlert();
    </script>
</body>
</html>
